<!DOCTYPE html>
<html lang="en" class="gr__hackinout_co">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <title>VAA 2018 | October 13 - 14, 2018</title>

    <meta name="keywords" content="inout, inout hackathon, hackathon, hackathon ideas, hackathon bangalore, hackathon india, hackathon hackers india, bangalore, community, hackathon community, developer community, developer relations, api, sdk, hardware hackathon, hardware hacks, technology, startups, innovation, hacks">
    <meta name="author" content="InOut Team">
    <meta http-equiv="cache-control" content="public">

    <meta name="theme-color" content="#1071F2">

</head>

<body id="page-top">
    <p>macData: "
        <span id="macdata"></span>"</p>
    <p>obj "
        <span id="obj"></span>"</p>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <script>
        $('documnent').ready(function () {
            var response = {
                "amount": "2500.00",
                "buyer": "fgdhfgkg@ghbjk.com",
                "currency": "INR",
                "fees": "47.50",
                "longurl": "https://www.instamojo.com/@ashwch/d66cb29dd059482e8072999f995c4eef/",
                "purpose": "Test this:TR63370TF7",
                "shorturl": null,
                "status": "Credit",
                "mac": "cc8ccf3f56750bd514d2a7bd1b6c118362ee9614",
                "buyer_name": 'tfghf fjvhkh',
                "buyer_phone": "+919764877645",
                "payment_id": "MOJO2364597385505325",
                "payment_request_id": "ded040d9a6bb49bba779e66bdefb53fd"
            };
            var salt = '8cd986ac9dec45be8aa292e0582cdc2f';

            var mac_calculated = function (obj, SALT_KEY) {

                var newD = function (obj) {
                    return Object.keys(obj).reduce((result, key) => {
                        if (key !== 'mac') {
                            result[key] = obj[key];
                        }
                        return result;
                    }, {});
                }
                var orderObj = function (newD) {

                    var keys = Object.keys(newD).sort(function keyOrder(k1, k2) {
                        if (k1 < k2) return -1;
                        else if (k1 > k2) return +1;
                        else return 0;
                    });

                    var i, after = {};
                    for (i = 0; i < keys.length; i++) {
                        after[keys[i]] = newD[keys[i]];
                        delete newD[keys[i]];
                    }

                    for (i = 0; i < keys.length; i++) {
                        newD[keys[i]] = after[keys[i]];
                    }
                    return newD.toLowerCase;
                }
                var macVal = Object.values(orderObj);
                var macData = macVal.join('|');

                return hmacsha1('8cd986ac9dec45be8aa292e0582cdc2f', macData);
                var mac_provided = response.mac;

                $('#obj').text(macVal);
                $('#macdata').text(mac_calculated);

            console.log(macData);
            console.log(obj);
            console.log(newD);

            }

            mac_calculated(response, salt);


        });

    </script>


</body>

</html>